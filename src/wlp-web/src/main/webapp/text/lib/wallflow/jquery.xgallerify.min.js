"use strict";!function(i){function n(n,o){o.jsSetup&&e(n,o.margin),n.addClass("xgallerify"),u?t(n,o):i(window).on("load",function(){t(n,o)}),i(window).resize(function(){t(n,o)})}function e(n,e){i(n.children()).css("display","inline-block").css("margin",e).find("img").css("width","100%").addClass("ximage-loaded")}function t(n,e){var t,l=[],h=[],m=n.children(),d=e.width||n[0].clientWidth,u=s(d,e.mode),c=e.imagesPerRow||u.itemsPerRow;e.width&&n.width(d);for(var g=0;g<m.length;g++){var f=i(m[g]);f.width()&&(l.push(f),(l.length>=c||g==m.length-1)&&(h.push(l),g==m.length-1&&l.length<u.itemsPerRow&&"fullwidth"!=e.lastRow?"hidden"===e.lastRow&&1!==c?r(l):a(h[h.length-1],d,e.margin,e.galleryMargin,t):t=o(h[h.length-1],d,e.margin,e.galleryMargin,u.maxHeight),t<u.maxHeight&&(l=[])))}}function o(i,n,e,t,o){return l(i,o),h(i,n,e,t)}function a(n,e,t,o,a){a=l(n,a);var r=0;return i(n).each(function(){r+=i(this).width()}),r>e&&(a=h(n,e,t,o)),a}function r(n){return i(n).each(function(){i(this).css("display","none")}),0}function l(i,n){for(var e=0;e<i.length;e++){var t=n/i[e].height();i[e].width(i[e].width()*t)}return i[0].height()}function h(n,e,t,o){var a=0;i(n).each(function(){a+=i(this).width()});for(var r=n.length*t*2,l=(e-(r+=o))/a,h=0;h<n.length;h++)n[h].css("width",n[h].width()*l);return n[0].height()}function m(i){return"object"==typeof i?i:"bootstrap"==i?{maxHeight:.5*screen.height,breakPoints:[{minWidth:1170,columns:4},{minWidth:970,columns:3},{minWidth:750,columns:2},{maxWidth:750,columns:.4}]}:"bootstrapv4"==i?{maxHeight:.5*screen.height,breakPoints:[{minWidth:1200,columns:4},{minWidth:992,columns:3},{minWidth:768,columns:2},{maxWidth:768,columns:.4}]}:"flickr"==i?{maxHeight:.4*screen.height,breakPoints:[{minWidth:1800,columns:4},{minWidth:1300,columns:3},{minWidth:610,columns:2},{maxWidth:610,columns:1}]}:"small"==i?{maxHeight:.4*screen.height,breakPoints:[{minWidth:1800,columns:14},{minWidth:1300,columns:10},{minWidth:610,columns:6},{maxWidth:610,columns:4}]}:{maxHeight:.5*screen.height,breakPoints:[{minWidth:1800,columns:4},{minWidth:1200,columns:3},{minWidth:768,columns:2},{maxWidth:768,columns:1}]}}function s(i,n){var e={itemsPerRow:void 0,maxHeight:void 0};i<=768&&(e.maxHeight=screen.height);for(var t=m(n),o=t.breakPoints.length-1;o>=0;o--)t.breakPoints[o].minWidth&&t.breakPoints[o].minWidth<i?e.itemsPerRow=t.breakPoints[o].columns:t.breakPoints[o].maxWidth&&t.breakPoints[o].maxWidth>i&&(e.itemsPerRow=t.breakPoints[o].columns);return t.maxHeight&&(e.maxHeight=t.maxHeight),e}function d(i,n,e){var t;return function(){var o=this,a=arguments,r=e&&!t;clearTimeout(t),t=setTimeout(function(){t=null,e||i.apply(o,a)},n),r&&i.apply(o,a)}}var u=!1;i(window).on("load",function(){u=!0}),i.fn.gallerify=i.fn.xgallerify=i.fn.xGallerify=function(i){var o=this;(i=i||{}).margin=void 0!==i.margin&&null!==i.margin?i.margin:10,i.galleryMargin=void 0!==i.galleryMargin&&null!==i.galleryMargin?i.galleryMargin:17,i.width=i.width||void 0,i.mode=i.mode||"default",i.jsSetup=void 0===i.jsSetup||null===i.jsSetup||i.jsSetup,i.imagesPerRow=i.imagesPerRow||void 0,i.debounceLoad=void 0!==i.debounceTime&&null!==i.debounceTime&&i.debounceTime%1==0,i.debounceTime=void 0!==i.debounceTime&&null!==i.debounceTime?i.debounceTime:50,i.lastRow=i.lastRow||"adjust",n(o,i),this.gallerify.render=function(){e(o,i.margin),t(o,i)};var a=d(function(){t(o,i)},i.debounceTime);return this.gallerify.renderAsyncImages=function(){e(o,i.margin),i.debounceLoad?o.find("img").on("load",function(){a()}):o.find("img").on("load",function(){t(o,i)})},o}}(jQuery);